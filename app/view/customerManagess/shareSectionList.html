<style>
    input, textarea {
        width: 350px;
    }

    textarea {
        height: 120px;
    }
</style>
<div id="page-content" class="clearfix">
    <div class="row-fluid">
        <div class="row-fluid">
            <div class="show-title"><span style="color:#787878;font-size: 14px;">用户管理&nbsp;>&nbsp;</span>分享设置参数</div>
            <!-- 检索  -->
            <form action="" method="post" name="Form" id="Form">
                <!--<table>-->
                    <!--<tbody>-->
                    <!--<tr>-->
                        <!--<td>-->
						<!--<span class="input-icon">-->
							<!--<input autocomplete="off" style="width:300px;" type="text" ng-model="title"-->
                                   <!--placeholder="这里输入用户指南标题名称查询">-->
							<!--<i class="icon-search"></i>-->
						<!--</span>-->
                        <!--</td>-->
                        <!--<td>-->
                            <!--<div>-->
                                <!--<div class="">-->
                                    <!--<label class="labelFont">&nbsp;</label>-->

                                    <!--<div class='input-group date'>-->
                                        <!--<input style="width: 130px !important;margin-left: 5px;height: 20px !important;margin-top: -28px !important;-->
                           <!--border:1px solid #ccc; border-radius: 5px;" value="" id="datetimepicker1"-->
                                               <!--data-date-format="YYYY-MM-DD" placeholder="创建日期"-->
                                               <!--type='text' class="form-control"-->
                                               <!--ng-model="createTime"-->
                                               <!--ng-change="timeStatusChange(createTime,modifyTime)"/>-->
                                    <!--</div>-->
                                <!--</div>-->
                            <!--</div>-->
                        <!--</td>-->
                        <!--<td>-->
                            <!--<div>-->
                                <!--<div class="">-->
                                    <!--<label class="labelFont">&nbsp;</label>-->

                                    <!--<div class='input-group date'>-->
                                        <!--<input style="width: 130px !important;margin-left: 5px;height: 20px !important;margin-top: -28px !important;-->
                           <!--border:1px solid #ccc; border-radius: 5px;" value="" id="datetimepicker2"-->
                                               <!--data-date-format="YYYY-MM-DD" placeholder="修改日期"-->
                                               <!--type='text' class="form-control"-->
                                               <!--ng-model="endTime" ng-change="timeStatusChange(createTime,modifyTime)"/>-->
                                    <!--</div>-->
                                <!--</div>-->
                            <!--</div>-->
                        <!--</td>-->
                        <!--<td style="vertical-align:top;">-->
                            <!--<div class="radius"-->
                                 <!--style="width: 30px;height: 30px;background-color: lightgray;position: relative;top: 2px;"-->
                                 <!--ng-click="userGuideSearch()">-->
                                <!--<span class="icon-search" style="position: absolute;top: 8px;left: 9px;"></span>-->
                            <!--</div>-->

                        <!--</td>-->
                    <!--</tr>-->
                    <!--</tbody>-->
                <!--</table>-->
                <!-- 检索  -->
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                    <tr>
                        <th style="width: 30px;">序号</th>
                        <th style="min-width: 53px;">分享标题</th>
                        <th>分享渠道</th>
                        <th>创建时间</th>
                        <th>分享内容</th>
                        <th>Web分享图片</th>
                        <th>APP分享图片</th>
                        <th>分享状态</th>
                        <th>启动分享</th>
                        <th class="hidden">当前页</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- 开始循环 -->
                    <tr ng-repeat="item in shareInfo">
                        <td>{{item.orderNo}}</td>
                        <td>{{item.shareTitle}}</td>
                        <td>{{item.shareType==1?"微信好友":(item.shareType==2?"微信朋友圈":(item.shareType==3?"微博":(item.shareType==4?"QQ好友":(item.shareType==5?"QQ空间":"邮箱"))))}}</td>
                        <td>{{item.createTime}}</td>
                        <td>
                            <button style="border-radius:6px !important;" ng-click="showShareContent(item,startPage)" class="btn btn-mini" data-toggle="dropdown">
                                <a href="" style="text-decoration: none;" title="查看分享内容" class="icon-file-alt">
                                </a></button>
                        </td>
                        <td>
                            <button style="border-radius:6px !important;" ng-click="showBottomImage(item,startPage)" class="btn btn-mini" data-toggle="dropdown">
                                <a href="" style="text-decoration: none;" title="显示图片" class="icon-picture">
                                </a></button>
                        </td>
                        <td>
                            <button style="border-radius:6px !important;" ng-click="showShareImage(item,startPage)" class="btn btn-mini" data-toggle="dropdown">
                                <a href="" style="text-decoration: none;" title="显示图片" class="icon-picture">
                                </a></button>
                        </td>
                        <td><span ng-class="{true:'statistic',false:'inclose'}[item.useing==1]">{{item.useing==1?"启用":"停发"}}</span></td>
                        <td>
                            <button style="border-radius:6px !important;" ng-click="openShare(item,startPage)" class="btn btn-mini" data-toggle="dropdown">
                                <a href="" style="text-decoration: none;" title="启动分享" class="icon-plane">
                                </a></button>
                        </td>
                        <td class="hidden">{{startPage}}</td>
                        <!--<td>-->
                            <!--<button style="border-radius:6px !important;" ng-click="viewGuide(item.title)"-->
                                    <!--class="btn btn-mini" data-toggle="dropdown">-->
                                <!--<a href="" style="text-decoration: none;" title="查看指南" class="icon-file-alt">-->
                                <!--</a></button>-->
                        <!--</td>-->
                        <td style="width: 30px;">
                            <div class="hidden-phone visible-desktop btn-group">
                                <div class="inline position-relative">
                                    <button class="btn btn-mini btn-info" data-toggle="dropdown">
                                        <i class="icon-cog icon-only"></i>
                                    </button>
                                    <ul class="dropdown-menu dropdown-icon-only dropdown-light pull-right dropdown-caret dropdown-close">
                                        <!--<li>-->
                                            <!--<a style="cursor: pointer;" title="查看分享"-->
                                               <!--ng-click="viewShare(item.title)"-->
                                               <!--class="tooltip-success" data-rel="tooltip" data-placement="left">-->
                                                <!--<span><i class="icon-file-alt"></i></span> </a></li>-->
                                            <!--</a>-->
                                        <!--</li>-->
                                        <li>
                                            <a style="cursor: pointer;" title="修改分享"
                                               ng-click="shareSectionEdit(item);"
                                               class="tooltip-success" data-rel="tooltip" data-placement="left">
                                                <span><i class="icon-edit"></i></span> </a></li>
                                            </a>
                                        </li>
                                        <li><a style="cursor: pointer;" title="删除分享" ng-click="shareDel(item)"
                                               class="tooltip-error" data-rel="tooltip" data-placement="left"><span
                                                class="red"><i class="icon-trash"></i></span> </a></li>

                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div>
                    <div>
                        <a class="btn btn-small btn-success" ng-click="shareSectionAdd()">新增分享</a>
                    </div>
                    <div style="overflow: hidden;max-width: 200px;float: right;font-size: 15px;margin-top: -25px;">
                        <p style="float:right;">共计：<span>{{ confTotalItems==0?0:confTotalItems }}</span>&nbsp;条数据</p>
                    </div>
                </div>
                <tm-pagination style="margin: 10px auto 0px auto !important;"
                               conf="paginationConf"></tm-pagination>
            </form>
        </div>

    </div>
</div>

<!--添加新分享弹框-->
<script type="text/ng-template" id="addShareDiag">
    <div class="ngdialog-titile"
         style="background-color: cornflowerblue;height: 30px;line-height: 30px;padding-left: 10px;font-weight: 700;">
        <span class="icon-bell"></span>
        <span>添加新分享</span>
    </div>
    <table class="table table-striped table-bordered">
        <tbody>
        <tr>
            <td class="text-right" style="width:130px;padding-top: 13px;">分享标题名称:</td>
            <td style="text-align:left !important;"><input type="text" value="" maxlength="32"
                                                           placeholder="这里输入分享标题名称"
                                                           title="分享标题名称" ng-model="shareTitle"
                                                           ng-change="addParamsChange(shareTitle,shareDescription,shareType)">
                <span style="color: #d80c18;font-size: 16px;margin-left: 13px;">*(必填项)</span></td>
            </td>
        </tr>
        <tr>
            <td class="text-right" style="width:100px;padding-top: 13px;">上传APP图片:</td>
            <td class="text-left">
                <iframe name="posthere" frameborder=0 style="display: none"></iframe>
                <form name="form1" method="post" action=""
                      enctype="multipart/form-data" target="posthere">
                    <!--<input type="file" name="file" id="excelFile">-->
                    <input type="file" file-model="imageToUpload" name="file1" id="file1"
                           onChange="document.form1.path1.value=this.value" style="display:none">
                    <input class="share-path" name="path1" readonly="readonly" style="border:none;width: 242px;">
                    <input type="submit" value="选择图片" onclick="document.form1.file1.click()"/>
                    <button ng-click="uploadShareImage()" style="width: 100px;background-color: #cc0033;border-radius: 6px;color: #fff;border: none;">上传分享图片</button>
                </form>
            </td>
        </tr>
        <tr>
            <td class="text-right" style="width:100px;padding-top: 13px;">上传Web图片:</td>
            <td class="text-left">
                <iframe name="posthere" frameborder=0 style="display: none"></iframe>
                <form name="form" method="post" action=""
                      enctype="multipart/form-data" target="posthere">
                    <!--<input type="file" name="file" id="excelFile">-->
                    <input type="file" file-model="imageToUpload" name="file" id="file"
                           onChange="document.form.path.value=this.value" style="display:none">
                    <input class="path" name="path" readonly="readonly" style="border:none;width: 242px;">
                    <input type="submit" value="选择图片" onclick="document.form.file.click()"/>
                    <button ng-click="uploadBottomImage()" style="width: 100px;background-color: #cc0033;border-radius: 6px;color: #fff;border: none;">上传APP图片</button>
                </form>
            </td>
        </tr>
        <tr>
            <td class="text-right" style="width:100px;padding-top: 13px;">分享描述:</td>
            <td class="text-left">
                <textarea ng-model="shareDescription" ng-change="addParamsChange(shareTitle,shareDescription,shareType)" style="width: 350px;height: 150px;" placeholder="这里输入分享描述"></textarea>
                <span style="color: #d80c18;font-size: 16px;margin-left: 12px;">*(必填项)</span></td>
            </td>
        </tr>
        <tr>
            <td class="text-right" style="width:120px;padding-top: 13px;">分享渠道:</td>
            <td class="text-left">
                <select style="width: 130px;height: 30px;padding-left: 10px;border-radius: 6px" ng-model="shareType" ng-change="addParamsChange(shareTitle,shareDescription,shareType)">
                    <option value=""><strong>选择分享渠道</strong></option>
                    <option value="1">微信好友</option>
                    <option value="2">微信朋友圈</option>
                    <option value="3">微博</option>
                    <option value="4">QQ好友</option>
                    <option value="5">QQ空间</option>
                    <option value="6">邮箱</option>
                </select>
                <span style="color: #d80c18;font-size: 16px;margin-left: 232px;">*(必填项)</span></td>
            </td>
        </tr>
        <!--<tr>-->
        <!--<td style="text-align: center;" colspan="2">-->
        <!--<a class="btn btn-mini btn-success" ng-click="uploadImage();closeThisDialog('a')">上传图片</a>-->
        <!--<a class="btn btn-mini btn-danger" ng-click="closeThisDialog('a')">取消</a>-->
        <!--</td>-->
        <!--</tr>-->
        </tbody>
    </table>
    <div style="text-align: center;margin: -10px 0 5px 0;padding: 5px;background-color: lavender;" colspan="10">
        <a class="btn btn-mini btn-success" ng-click="shareSave();">确认新增分享</a>
        <a class="btn btn-mini btn-danger" ng-click="closeThisDialog('a')">取消</a>
    </div>
</script>

<!--修改分享弹框-->
<script type="text/ng-template" id="editShareDiag">
    <div class="ngdialog-titile"
         style="background-color: cornflowerblue;height: 30px;line-height: 30px;padding-left: 10px;font-weight: 700;">
        <span class="icon-bell"></span>
        <span>修改分享</span>
    </div>
    <table class="table table-striped table-bordered">
        <tbody>
        <tr>
            <td class="text-right" style="width:130px;padding-top: 13px;">分享标题名称:</td>
            <td style="text-align:left !important;"><input type="text" value="" maxlength="32"
                                                           placeholder="{{editShareInfo.shareTitle}}"
                                                           title="分享标题名称" ng-model="editShareTitle"
                                                           ng-change="editParamsChange(editShareTitle,editShareDescription,editShareType)">
            </td>
        </tr>
        <tr>
            <td class="text-right" style="width:100px;padding-top: 13px;">上传APP图片:</td>
            <td class="text-left">
                <iframe name="posthere" frameborder=0 style="display: none"></iframe>
                <form name="form3" method="post" action=""
                      enctype="multipart/form-data" target="posthere">
                    <!--<input type="file" name="file" id="excelFile">-->
                    <input type="file" file-model="imageToUpload" name="file3" id="file3"
                           onChange="document.form3.path3.value=this.value" style="display:none">
                    <input class="edit-share-path" name="path3" readonly="readonly" style="border:none;width: 242px;">
                    <input type="submit" value="选择图片" onclick="document.form3.file3.click()"/>
                    <button ng-click="editUploadShareImage()" style="width: 100px;background-color: #cc0033;border-radius: 6px;color: #fff;border: none;">上传APP图片</button>
                </form>
            </td>
        </tr>
        <tr>
            <td class="text-right" style="width:100px;padding-top: 13px;">上传Web图片:</td>
            <td class="text-left">
                <iframe name="posthere" frameborder=0 style="display: none"></iframe>
                <form name="form4" method="post" action=""
                      enctype="multipart/form-data" target="posthere">
                    <!--<input type="file" name="file" id="excelFile">-->
                    <input type="file" file-model="imageToUpload" name="file" id="file4"
                           onChange="document.form4.path4.value=this.value" style="display:none">
                    <input class="edit-bottom-path" name="path4" readonly="readonly" style="border:none;width: 242px;">
                    <input type="submit" value="选择图片" onclick="document.form4.file4.click()"/>
                    <button ng-click="editUploadBottomImage()" style="width: 100px;background-color: #cc0033;border-radius: 6px;color: #fff;border: none;">上传Web图片</button>
                </form>
            </td>
        </tr>
        <tr>
            <td class="text-right" style="width:100px;padding-top: 13px;">分享描述:</td>
            <td class="text-left">
                <textarea ng-model="editShareDescription" ng-change="editParamsChange(editShareTitle,editShareDescription,editShareType)" style="width: 350px;height: 150px;" placeholder="{{editShareInfo.shareDescribe}}"></textarea>
            </td>
        </tr>
        <tr>
            <td class="text-right" style="width:120px;padding-top: 13px;">分享渠道:</td>
            <td class="text-left">
                <select style="width: 130px;height: 30px;padding-left: 10px;border-radius: 6px" ng-model="editShareType" ng-change="editParamsChange(editShareTitle,editShareDescription,editShareType)">
                    <option value=""><strong>{{editShareInfo.shareType==1?"微信好友":(editShareInfo.shareType==2?"微信朋友圈":(editShareInfo.shareType==3?"微博":(editShareInfo.shareType==4?"QQ好友":(editShareInfo.shareType==5?"QQ空间":"邮箱"))))}}</strong></option>
                    <option value="1">微信好友</option>
                    <option value="2">微信朋友圈</option>
                    <option value="3">微博</option>
                    <option value="4">QQ好友</option>
                    <option value="5">QQ空间</option>
                    <option value="6">邮箱</option>
                </select>
            </td>
        </tr>
        <!--<tr>-->
        <!--<td style="text-align: center;" colspan="2">-->
        <!--<a class="btn btn-mini btn-success" ng-click="uploadImage();closeThisDialog('a')">上传图片</a>-->
        <!--<a class="btn btn-mini btn-danger" ng-click="closeThisDialog('a')">取消</a>-->
        <!--</td>-->
        <!--</tr>-->
        </tbody>
    </table>
    <div style="text-align: center;margin: -10px 0 5px 0;padding: 5px;background-color: lavender;" colspan="10">
        <a class="btn btn-mini btn-success" ng-click="editShareSave();closeThisDialog('a')">确认修改分享</a>
        <a class="btn btn-mini btn-danger" ng-click="closeThisDialog('a')">取消</a>
    </div>
</script>

<!--显示图片-->
<script type="text/ng-template" id="showImageDiag">
    <style>
        .ngdialog-content{
            text-align: center;
        }
        .ngdialog-titile{
            text-align: left;
        }
    </style>
    <div class="ngdialog-titile"
         style="background-color: cornflowerblue;height: 30px;line-height: 30px;padding-left: 10px;font-weight: 700;">
        <span class="icon-bell"></span>
        <span>显示图片</span>
    </div>
    <div>
        <img src="{{thisImagePath}}" alt=""/>
    </div>
    <div style="text-align: center;margin: 5px 0;padding: 5px;background-color: lavender;">
        <a class="btn btn-mini btn-danger" ng-click="closeThisDialog('a')">关闭</a>
    </div>
</script>

<!--查看分享内容-->
<script type="text/ng-template" id="showContentDiag">
    <style>
        .ngdialog-content{
            text-align: left;
        }
    </style>
    <div class="ngdialog-titile"
         style="background-color: cornflowerblue;height: 30px;line-height: 30px;padding-left: 10px;font-weight: 700;">
        <span class="icon-bell"></span>
        <span>分享内容</span>
    </div>
    <div>
        <p>{{thisContent}}</p>
    </div>
    <div style="text-align: center;margin: 5px 0;padding: 5px;background-color: lavender;">
        <a class="btn btn-mini btn-danger" ng-click="closeThisDialog('a')">关闭</a>
    </div>
</script>